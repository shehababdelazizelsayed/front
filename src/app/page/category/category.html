<div
  class="min-vh-100"
  style="background: linear-gradient(to bottom, var(--bs-body-bg), var(--bs-secondary))"
>
  <app-nav></app-nav>

  <main class="container" style="padding-top: 120px; padding-bottom: 80px">
    <div class="mb-5 text-center text-lg-start">
      <h1 class="display-4 fw-bold mb-3">All Books</h1>
      <p class="fs-5 text-muted-custom">Discover our complete collection</p>
    </div>

    <div class="row g-4">
      <!-- Filters Sidebar -->
      <div class="col-lg-3">
        <aside class="card shadow-lg border">
          <div class="card-body">
            <h3 class="h5 fw-semibold mb-4">Filters</h3>

            <div class="mb-4">
              <label class="form-label fw-medium">Category</label>
              <select
                [(ngModel)]="selectedCategory"
                (ngModelChange)="onCategoryChange($event)"
                class="form-select"
              >
                <option value="all">All Categories</option>
                <option *ngFor="let cat of categories.slice(1)" [value]="cat.toLowerCase()">
                  {{ cat }}
                </option>
              </select>
            </div>

            <div class="mb-4">
              <label class="form-label fw-medium">Sort By</label>
              <select
                [(ngModel)]="selectedSort"
                (ngModelChange)="onSortChange()"
                class="form-select"
              >
                <option *ngFor="let option of sortOptions" [value]="option.value">
                  {{ option.label }}
                </option>
              </select>
            </div>

            <div class="mb-0">
              <label class="form-label fw-medium">Price Range</label>
              <div class="d-grid gap-2">
                <button
                  *ngFor="let range of priceRanges"
                  (click)="onPriceRangeChange(range)"
                  [class.btn-primary]="selectedPrice === range"
                  [class.btn-outline-secondary]="selectedPrice !== range"
                  class="btn text-start"
                >
                  {{
                    range === 'all'
                      ? 'All Prices'
                      : range === 'under-15'
                      ? 'Under $15'
                      : range === '15-30'
                      ? '$15 - $30'
                      : range === '30-50'
                      ? '$30 - $50'
                      : 'Over $50'
                  }}
                </button>
              </div>
            </div>
          </div>
        </aside>
      </div>

      <!-- Books Grid -->
      <div class="col-lg-9">
        <div class="row g-4">
          <div *ngFor="let book of books" class="col-12 col-md-6 col-xl-4">
            <app-book-card [book]="book"></app-book-card>
          </div>
        </div>

        <!-- Pagination Controls -->
        <div *ngIf="totalBooks > 0" class="d-flex justify-content-center align-items-center mt-5">
          <nav aria-label="Page navigation">
            <ul class="pagination mb-0">
              <!-- Previous Button -->
              <li class="page-item" [class.disabled]="currentPage === 1">
                <button
                  class="page-link"
                  (click)="previousPage()"
                  [disabled]="currentPage === 1"
                  aria-label="Previous page"
                >
                  <span aria-hidden="true">&laquo;</span> Previous
                </button>
              </li>

              <!-- Page Numbers -->
              <li
                *ngFor="let page of getPageNumbers()"
                class="page-item"
                [class.active]="page === currentPage"
              >
                <button
                  class="page-link"
                  (click)="goToPage(page)"
                  [class.active]="page === currentPage"
                >
                  {{ page }}
                </button>
              </li>

              <!-- Next Button -->
              <li class="page-item" [class.disabled]="currentPage === totalPages">
                <button
                  class="page-link"
                  (click)="nextPage()"
                  [disabled]="currentPage === totalPages"
                  aria-label="Next page"
                >
                  Next <span aria-hidden="true">&raquo;</span>
                </button>
              </li>
            </ul>
          </nav>
        </div>

        <!-- Page Info -->
        <div *ngIf="totalBooks > 0" class="text-center mt-3">
          <p class="text-muted-custom small">
            Showing page <strong>{{ currentPage }}</strong> of <strong>{{ totalPages }}</strong> ({{
              totalBooks
            }}
            total books)
          </p>
        </div>
      </div>
    </div>
  </main>
</div>
<app-error-toast></app-error-toast>
<app-success-toast></app-success-toast>
<app-ai></app-ai>
<app-footer></app-footer>
